{"ast":null,"code":"import _asyncToGenerator from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\My-MERN-full-stack\\\\RMR\\\\RMR-courier-service-app\\\\server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import Nav from\"../header/nav/Nav\";import\"./trackdetails.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Trackdetails=function Trackdetails(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),trackdetails=_useState2[0],setTrackdetails=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),orderstatus=_useState4[0],setOrderstatus=_useState4[1];var getorderbyid=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/api/order/id\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"tid\")})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;// console.log(\"order user: \", data.user);\nsetOrderstatus(data.singleorder.status);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getorderbyid(){return _ref.apply(this,arguments);};}();useEffect(function(){getorderbyid();},[]);var gettrack=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/api/order/id\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"tid\")})});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;setTrackdetails(data.singleorder.track);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function gettrack(){return _ref2.apply(this,arguments);};}();useEffect(function(){gettrack();},[]);console.log(trackdetails);var gotit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:5000/api/order/aprove/\".concat(localStorage.getItem(\"tid\")),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({status:\"complet\"})});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function gotit(){return _ref3.apply(this,arguments);};}();var updatetrack=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://localhost:5000/api/order/track/\".concat(localStorage.getItem(\"tid\")),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({track:\"The dalivery has completed and this dalivery record will be remove with in few days. If you want to save this dalivery history then please contant with chif Developer (Eftakhar Jaman) ejmahadiair@gmail.com/+8801642167361\"})});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function updatetrack(){return _ref4.apply(this,arguments);};}();var handlesubmit=function handlesubmit(e){e.preventDefault();gotit();updatetrack();if(orderstatus){alert(\"Thank you for paitent. We hope your product is safe and secure.\");}else{alert(\"Make sure your dalivery or order Id\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"track-container\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Track Details:\"}),/*#__PURE__*/_jsx(\"h3\",{children:trackdetails})]}),orderstatus===\"ongoing\"&&/*#__PURE__*/_jsx(\"form\",{onSubmit:handlesubmit,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Got It\"})})]})});};export default Trackdetails;","map":{"version":3,"sources":["E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/src/components/Trackdetails/Trackdetails.js"],"names":["React","useEffect","useState","Nav","Trackdetails","trackdetails","setTrackdetails","orderstatus","setOrderstatus","getorderbyid","fetch","method","headers","body","JSON","stringify","id","localStorage","getItem","res","json","data","singleorder","status","gettrack","track","console","log","gotit","updatetrack","handlesubmit","e","preventDefault","alert"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Nav from \"../header/nav/Nav\";\r\nimport \"./trackdetails.scss\";\r\nconst Trackdetails = () => {\r\n  const [trackdetails, setTrackdetails] = useState(\"\");\r\n  const [orderstatus, setOrderstatus] = useState(\"\");\r\n\r\n  const getorderbyid = async () => {\r\n    const res = await fetch(\"http://localhost:5000/api/order/id\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        id: localStorage.getItem(\"tid\"),\r\n      }),\r\n    });\r\n    const data = await res.json();\r\n    // console.log(\"order user: \", data.user);\r\n    setOrderstatus(data.singleorder.status);\r\n  };\r\n  useEffect(() => {\r\n    getorderbyid();\r\n  }, []);\r\n  const gettrack = async () => {\r\n    const res = await fetch(\"http://localhost:5000/api/order/id\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id: localStorage.getItem(\"tid\") }),\r\n    });\r\n    const data = await res.json();\r\n    setTrackdetails(data.singleorder.track);\r\n  };\r\n  useEffect(() => {\r\n    gettrack();\r\n  }, []);\r\n  console.log(trackdetails);\r\n  const gotit = async () => {\r\n    await fetch(\r\n      `http://localhost:5000/api/order/aprove/${localStorage.getItem(\"tid\")}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          status: \"complet\",\r\n        }),\r\n      }\r\n    );\r\n  };\r\n  const updatetrack = async () => {\r\n    await fetch(\r\n      `http://localhost:5000/api/order/track/${localStorage.getItem(\"tid\")}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          track:\r\n            \"The dalivery has completed and this dalivery record will be remove with in few days. If you want to save this dalivery history then please contant with chif Developer (Eftakhar Jaman) ejmahadiair@gmail.com/+8801642167361\",\r\n        }),\r\n      }\r\n    );\r\n    // const data = await res.json();\r\n    // console.log(\"update track: \", data);\r\n    // alert(data.message);\r\n  };\r\n  const handlesubmit = (e) => {\r\n    e.preventDefault();\r\n    gotit();\r\n    updatetrack();\r\n    if (orderstatus) {\r\n      alert(\"Thank you for paitent. We hope your product is safe and secure.\");\r\n    } else {\r\n      alert(\"Make sure your dalivery or order Id\");\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"track-container\">\r\n        <Nav />\r\n        <div className=\"track-box\">\r\n          <h1>Track Details:</h1>\r\n          <h3>{trackdetails}</h3>\r\n        </div>\r\n        {orderstatus === \"ongoing\" && (\r\n          <form onSubmit={handlesubmit}>\r\n            <button type=\"submit\">Got It</button>\r\n          </form>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Trackdetails;\r\n"]},"metadata":{},"sourceType":"module"}