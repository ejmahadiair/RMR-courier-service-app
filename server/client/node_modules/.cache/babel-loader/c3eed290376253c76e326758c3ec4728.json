{"ast":null,"code":"import _asyncToGenerator from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\My-MERN-full-stack\\\\RMR\\\\RMR-courier-service-app\\\\server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from\"react\";import Editorder from\"../editorder/Editorder\";import\"./userorders.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Userorders=function Userorders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var id=localStorage.getItem(\"userId\");var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),myorder=_useState4[0],setMyorder=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),editid=_useState6[0],setEditid=_useState6[1];var getorders=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/api/order/\".concat(id),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;// console.log(\"User order by Id: \", data.userOrders.order);\nsetOrders(data.userOrders.order);case 7:case\"end\":return _context.stop();}}},_callee);})),[id]);useEffect(function(){getorders();},[getorders]);var Deleteorder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/api/order/\".concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;console.log(\"area deleted order: \",data);alert(data.message);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function Deleteorder(_x){return _ref2.apply(this,arguments);};}();var deleteorder=function deleteorder(id){Deleteorder(id);};var editorder=function editorder(id){setMyorder(true);setEditid(id);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-order-container\",children:[!myorder&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:orders.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4 item\",children:[/*#__PURE__*/_jsx(\"h2\",{children:item.type}),/*#__PURE__*/_jsx(\"h3\",{style:{color:\"red\"},children:item.status}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Place: \",item.city,\" City\"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Area: \",item.area]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Order Id: \",item._id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Details Area : \",item.darea]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Paid: $\",item.charge,\" BDD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"parmission\",children:item.status===\"panding\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return editorder(item._id);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"reject\",onClick:function onClick(){return deleteorder(item._id);},children:\"Delete\"})]})})]},key);})}),myorder&&/*#__PURE__*/_jsx(Editorder,{setMyorder:setMyorder,editid:editid})]})})});};export default Userorders;","map":{"version":3,"sources":["E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/src/components/profilecontrol/userorders/Userorders.js"],"names":["React","useCallback","useEffect","useState","Editorder","Userorders","orders","setOrders","id","localStorage","getItem","myorder","setMyorder","editid","setEditid","getorders","fetch","method","headers","res","json","data","userOrders","order","Deleteorder","console","log","alert","message","deleteorder","editorder","map","item","key","type","color","status","city","area","_id","darea","charge"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport Editorder from \"../editorder/Editorder\";\r\nimport \"./userorders.scss\";\r\nconst Userorders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const id = localStorage.getItem(\"userId\");\r\n  const [myorder, setMyorder] = useState(false);\r\n  const [editid, setEditid] = useState(\"\");\r\n  const getorders = useCallback(async () => {\r\n    const res = await fetch(`http://localhost:5000/api/order/${id}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    const data = await res.json();\r\n    // console.log(\"User order by Id: \", data.userOrders.order);\r\n    setOrders(data.userOrders.order);\r\n  }, [id]);\r\n  useEffect(() => {\r\n    getorders();\r\n  }, [getorders]);\r\n\r\n  const Deleteorder = async (id) => {\r\n    const res = await fetch(`http://localhost:5000/api/order/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    const data = await res.json();\r\n    console.log(\"area deleted order: \", data);\r\n    alert(data.message);\r\n  };\r\n  const deleteorder = (id) => {\r\n    Deleteorder(id);\r\n  };\r\n  const editorder = (id) => {\r\n    setMyorder(true);\r\n    setEditid(id);\r\n  };\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"user-order-container\">\r\n          {!myorder && (\r\n            <div className=\"row\">\r\n              {/*start*/}\r\n              {orders.map((item, key) => {\r\n                return (\r\n                  <div className=\"col-lg-4 item\" key={key}>\r\n                    <h2>{item.type}</h2>\r\n                    <h3 style={{ color: \"red\" }}>{item.status}</h3>\r\n                    <h4>Place: {item.city} City</h4>\r\n                    <h5>Area: {item.area}</h5>\r\n                    <h6>Order Id: {item._id}</h6>\r\n                    <p>Details Area : {item.darea}</p>\r\n                    <h6>Paid: ${item.charge} BDD</h6>\r\n                    <div className=\"parmission\">\r\n                      {item.status === \"panding\" && (\r\n                        <>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => editorder(item._id)}\r\n                          >\r\n                            Edit\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"reject\"\r\n                            onClick={() => deleteorder(item._id)}\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {/*end*/}\r\n            </div>\r\n          )}\r\n          {myorder && <Editorder setMyorder={setMyorder} editid={editid} />}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Userorders;\r\n"]},"metadata":{},"sourceType":"module"}