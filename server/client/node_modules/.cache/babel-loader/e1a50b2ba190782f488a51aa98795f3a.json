{"ast":null,"code":"import _asyncToGenerator from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\My-MERN-full-stack\\\\RMR\\\\RMR-courier-service-app\\\\server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{VisibilitySharp,VisibilityOffSharp}from\"@material-ui/icons\";import\"./portal.scss\";import Nav from\"../header/nav/Nav\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Portal=function Portal(_ref){var portaltoapp=_ref.portaltoapp;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),istrue=_useState2[0],setIstrue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userdata=_useState6[0],setUserData=_useState6[1];var navigate=useNavigate();var _useState7=useState({name:\"admin\",email:\"admin@gmail.com\",password:\"admin\"}),_useState8=_slicedToArray(_useState7,2),input=_useState8[0],setInput=_useState8[1];var handlerChange=function handlerChange(e){setInput(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,data,_response,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!istrue){_context.next=21;break;}_context.prev=2;_context.next=5;return fetch(\"http://localhost:5000/api/user/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:input.email,password:input.password})});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;localStorage.setItem(\"userId\",data.user._id);setUserData(data);portaltoapp(data);alert(\"login successfull\");navigate(\"/profile\");_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);alert(\"authentication problem.  \",_context.t0);case 19:_context.next=36;break;case 21:_context.prev=21;_context.next=24;return fetch(\"http://localhost:5000/api/user/signup\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:input.name,email:input.email,password:input.password})});case 24:_response=_context.sent;_context.next=27;return _response.json();case 27:_data=_context.sent;setUserData(_data.user);navigate(\"/portal\");if(_data.exist){alert(_data.exist);}else{alert(\"registration seccessfull login please\");}_context.next=36;break;case 33:_context.prev=33;_context.t1=_context[\"catch\"](21);alert(\"Regisration faild. \",_context.t1);case 36:case\"end\":return _context.stop();}}},_callee,null,[[2,16],[21,33]]);}));return _handleSubmit.apply(this,arguments);}console.log(\"user: \",userdata);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Nav,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"main-portal-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"portal-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"option\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){return setIstrue(true);},children:\"LOGIN\"}),/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){return setIstrue(false);},children:\"REGISTER\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!istrue&&/*#__PURE__*/_jsx(\"input\",{name:\"name\",type:\"text\",value:input.name,placeholder:\"Enter Name\",onChange:handlerChange}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",value:input.email,placeholder:\"Enter Email\",onChange:handlerChange}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-pass\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:visible?\"text\":\"password\",value:input.password,placeholder:\"Enter password\",onChange:handlerChange}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setVisible(!visible);},children:visible?/*#__PURE__*/_jsx(VisibilitySharp,{}):/*#__PURE__*/_jsx(VisibilityOffSharp,{})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:istrue?\"LogIn\":\"Register\"})]})]})})]});};export default Portal;","map":{"version":3,"sources":["E:/My-MERN-full-stack/RMR/RMR-courier-service-app/server/client/src/components/Portal/Portal.js"],"names":["React","useState","VisibilitySharp","VisibilityOffSharp","Nav","useNavigate","Portal","portaltoapp","istrue","setIstrue","visible","setVisible","userdata","setUserData","navigate","name","email","password","input","setInput","handlerChange","e","prevState","target","value","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","data","localStorage","setItem","user","_id","alert","exist","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { VisibilitySharp, VisibilityOffSharp } from \"@material-ui/icons\";\r\nimport \"./portal.scss\";\r\nimport Nav from \"../header/nav/Nav\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Portal = ({ portaltoapp }) => {\r\n  const [istrue, setIstrue] = useState(true);\r\n  const [visible, setVisible] = useState(false);\r\n  const [userdata, setUserData] = useState([]);\r\n  const navigate = useNavigate();\r\n  const [input, setInput] = useState({\r\n    name: \"admin\",\r\n    email: \"admin@gmail.com\",\r\n    password: \"admin\",\r\n  });\r\n\r\n  const handlerChange = (e) => {\r\n    setInput((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [e.target.name]: e.target.value,\r\n      };\r\n    });\r\n  };\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (istrue) {\r\n      try {\r\n        const response = await fetch(\"http://localhost:5000/api/user/login\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            email: input.email,\r\n            password: input.password,\r\n          }),\r\n        });\r\n        const data = await response.json();\r\n        localStorage.setItem(\"userId\", data.user._id);\r\n        setUserData(data);\r\n        portaltoapp(data);\r\n        alert(\"login successfull\");\r\n        navigate(\"/profile\");\r\n      } catch (e) {\r\n        alert(\"authentication problem.  \", e);\r\n      }\r\n    } else {\r\n      try {\r\n        const response = await fetch(\"http://localhost:5000/api/user/signup\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            name: input.name,\r\n            email: input.email,\r\n            password: input.password,\r\n          }),\r\n        });\r\n        const data = await response.json();\r\n        setUserData(data.user);\r\n        navigate(\"/portal\");\r\n        if (data.exist) {\r\n          alert(data.exist);\r\n        } else {\r\n          alert(\"registration seccessfull login please\");\r\n        }\r\n      } catch (e) {\r\n        alert(\"Regisration faild. \", e);\r\n      }\r\n    }\r\n  }\r\n  console.log(\"user: \", userdata);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Nav />\r\n      </div>\r\n      <div className=\"main-portal-container\">\r\n        <div className=\"portal-container\">\r\n          <div className=\"option\">\r\n            <h1 onClick={() => setIstrue(true)}>LOGIN</h1>\r\n            <h1 onClick={() => setIstrue(false)}>REGISTER</h1>\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n            {!istrue && (\r\n              <input\r\n                name=\"name\"\r\n                type=\"text\"\r\n                value={input.name}\r\n                placeholder=\"Enter Name\"\r\n                onChange={handlerChange}\r\n              />\r\n            )}\r\n            <input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={input.email}\r\n              placeholder=\"Enter Email\"\r\n              onChange={handlerChange}\r\n            />\r\n            <span className=\"input-pass\">\r\n              <input\r\n                name=\"password\"\r\n                type={visible ? \"text\" : \"password\"}\r\n                value={input.password}\r\n                placeholder=\"Enter password\"\r\n                onChange={handlerChange}\r\n              />\r\n              <div onClick={() => setVisible(!visible)}>\r\n                {visible ? <VisibilitySharp /> : <VisibilityOffSharp />}\r\n              </div>\r\n            </span>\r\n\r\n            <button type=\"submit\">{istrue ? \"LogIn\" : \"Register\"}</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Portal;\r\n"]},"metadata":{},"sourceType":"module"}